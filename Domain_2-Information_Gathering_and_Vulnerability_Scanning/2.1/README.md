
# 2.1 - Given a scenario, perform passive reconnaissance.

## Passive Recon #1- DNS Lookups:
* *DNS*: a system that helps network clients find a website using human-readable hostnames, rather than numeric IPs. An organization’s IP might be useful as an entry point into the network, or as a vector for performing more recon.
* An advanced DNS query can retrieve more information than just an IP address → ex. individual DNS records:

	|DNS Records | Description|
	|--|--|
	|A-Record|* Indicates IPv4 address (of a given host) |
	| AAAA-Record |* Indicates IPv6 address (of a given host) |
	|PTR-Record|* (Opposite of ‘A’ record) Indicates hostname, of a given IP. |
	|CNAME-Record|* Maps a subdomain to the true/root/canonical domain name. |
	|NS-Record|* Which server contains the actual DNS record. 
	|SOA-Record|* Stores important info about a domain or zone. Ex. Admin’s email address.|
	|MX-Record|* Directs emails to a mail server.|
	|TXT-Record|* Adds text into the DNS.|
	|SRV-Record|* Specifies a host & port for a specific service.|
 * focus on MX, TXT, and SRV records → to check for an email & 3rd-party SaaS solutions
 * Query DNS records by using tools.
	 * [1] nslookup, [2] dig, [3] host, and [4] Whois (web interface).  
 * ***Zone Transfer***   (or AXFR) -- a DNS zone transfer (AXFR) is a transaction that is intended to be used between DNS servers to replicate databases. It could also be used for information gathering by attackers. 
	 * You do NOT want to allow a zone transfer using DNS (displays all dns information). It’s a security issue. 
 
 ## Passive Recon #2- Target Recon:
* Target recon involves finding intel regarding your pentest target.
* What may be freely/easily attainable info regarding the target?
	* ***Technical contracts***, ***Administrative contacts*** -- The company/target uses the utilizes websites for their business. In doing so, they provide a wealth of helpful information which attackers can leverage. 
	* ***Cloud-hosted vs. On-prem hosted*** -- what hosting services are they using?
	* ***Company Reputation/Security Posture*** -- Are they good/bad at their internal processes? Are they known as an extremely secure organization? 
		* An organization known for their impressive security practices is bad for pentesters (and attackers).
### Social Media 
* Websites and social media → attackers can easily gather valuable information, which can then be used to plan their attack (ex. spear-phishing ***Key Contacts***).
* Valuable intel is provided in certain sections of ***Job Listings*** (i.e. ***Job Responsibilities*** and  ***Technology Stacks***).
### Recognizing Certificate Flaws:
* Your company’s website could have ***Cryptographic Flaws*** → which could lead to unauthorized entry/access.
	* Cryptographic inspection → Checks validity of certs or potential vulnerabilities to exploit w/in the target servers. 
	* Out of date protocols → vulnerable to exploitation
	* Cipher suite → defines the algorithm supported by the client & server when requested to use encryption & hashing.
	* No handshake? Does the target use self-signed certs? Vendor certs?
	* Weak keys/versions → susceptible to certain attacks (i.e. key attacks, downgrade attacks).
* SSL/TLS uses digital certificates to validate the identity of the web server and exchange cryptographic keys.
	* SSL certificates: SSL 2 & 3 are outdated and insecure  – TLS is standard. Using an older SSL is bad (vulnerabilities).
* ***Revocation*** -- Your cert may get revoked, or you forget to renew it and gets revoked (expires). 
	* Browsers won’t let you access a site with a revoked cert. Revoked certificates affect subdomains too. 
	* CRL → list of digital certificates revoked by the CA. Check multiple certs. OCSP checks just one. 
	* OCSP → (Online Certificate Status Protocol) alternative to using CRL. Checking validity status of a single digital certificate.
### Data:
* Be aware that some data regarding an organization can be unknowingly available.
	* Ex. An organization's website allowing the download of a booklet, pdf, etc. → These freely-available documents could mistakenly provide sensitive  information, or intel that can be used to plan an attack.
* Data dumps → Sensitive information may have been stolen and leaked onto the darkweb (ex. ***Password dumps***).
	* HaveIBeenPwned.com → Displays websites that have had a breach, as well as the types of data that was compromised during an associated breach.
* ***File metadata*** -- Metadata is known as information that is stored or recorded as a (1) property of an object, (2) state of a system, or (3) transaction.
	* Metadata entries can expose sensitive information.
	* 2 tools → ***Metagoofil*** and ***FOCA***.
* ***Strategic search engine analysis/enumeration*** --
	* Google hacking: Utilizing Google search engines to identify security weaknesses in publicly available sources, such as an organization's website.
	* GHDB (Google Hacking Database): Provides a database of search strings optimized for locating vulnerable websites and services (https://www.exploit-db.com/google-hacking-database).
	* Automation tool → ***theHarvester***.
* ***Website archive/caching*** -- 
	* You can grab details from previous versions of websites. I.e. when a public event occurred (it may have been saved/cached). Deleted data can still exist somewhere on the internet. 
		* Wayback Machine (https://archive.org). 
* ***Public source-code repositories*** -- 
	* These websites allow developers to work together in an agile way to create software very quickly. 
		* Ex. Github, Bitbucket, CloudForge, and SourceForge.
	* Some organizations have their own company-ran Github sites. Developers in these companies may mistakenly set their private code as ‘public’ (or include keys/passwords within their code). 

### Open-source intelligence (OSINT):
* OSINT: Publicly available information. (ex. Job listings, investor relations site, blogs, social media).
* Attackers can learn of the technology, roles, contacts, security mindset, user details (to then utilize for password attacks).
* Tools → ***Shodan***; ***Recon-ng***; ***WHOIS***; ***Nslookup***; ***FOCA***; ***theHarvester***; ***Maltego***; ***Censys***.
### Sources:
* From MITRE → 
	* ***CVE*** (Common vulnerabilities and exposures) -- Publicly-known vulnerabilities have ID numbers, known as CVEs. 
	* ***CWE*** (Common weakness enumeration) -- Basically, a CWE gives you more detail on the type of vulnerability that you’re dealing with.
